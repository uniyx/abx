<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ABX Web Audio Test</title>
  <style>
    button {
      margin: 8px;
      padding: 10px 16px;
      font-size: 16px;
    }
    #controls {
      margin-top: 20px;
    }
    #volume-control {
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h1>ABX Audio Test</h1>

  <form action="/" method="post" enctype="multipart/form-data">
    <input type="file" name="file" accept=".flac" required>
    <button type="submit">Upload and Convert</button>
  </form>

  {% if flac_base %}
    <div id="controls">
      <h2>ABX Controls</h2>
      <button onclick="switchToA()">Switch to A</button>
      <button onclick="switchToX()">Switch to X</button>
      <button onclick="switchToB()">Switch to B</button>
      <button id="pause-button" onclick="pauseAudio()">Pause</button>
      <button onclick="resetTrial()">Reset Trial</button>

      <div id="volume-control">
        <label for="volume">Volume: <span id="volume-label">50%</span></label>
        <input type="range" id="volume" min="0" max="100" value="50">
      </div>
    </div>

    <p id="status">Status: Not started</p>

    <script>
      const AUDIO_PATH_A = "{{ url_for('audio', filename=flac_base + '_a.wav') }}";
      const AUDIO_PATH_B = "{{ url_for('audio', filename=flac_base + '_b.wav') }}";
    </script>
    <script src="{{ url_for('static', filename='abx.js') }}"></script>
  {% endif %}
</body>
</html>
